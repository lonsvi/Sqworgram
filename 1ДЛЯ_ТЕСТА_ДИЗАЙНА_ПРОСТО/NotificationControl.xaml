<UserControl x:Class="_1ДЛЯ_ТЕСТА_ДИЗАЙНА_ПРОСТО.NotificationControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="80" d:DesignWidth="350"
             Opacity="0"
             Loaded="UserControl_Loaded">

    <UserControl.Resources>
        <!-- Добавлен кастомный стиль для ProgressBar -->
        <Style x:Key="LifeProgressBarStyle" TargetType="ProgressBar">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ProgressBar">
                        <Grid>
                            <!-- Это "дорожка" прогресс-бара, которая видна всегда -->
                            <Border x:Name="PART_Track" CornerRadius="2" Background="{TemplateBinding Background}" />
                            <!-- Это сам индикатор, который уменьшается -->
                            <Border x:Name="PART_Indicator" CornerRadius="2" Background="{TemplateBinding Foreground}" HorizontalAlignment="Left" />
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.3"/>
                    <ThicknessAnimation Storyboard.TargetProperty="Margin" From="0,0,0,0" To="0,0,10,10" Duration="0:0:0.3"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </UserControl.Triggers>
    <Border x:Name="NotificationBorder" Background="#CC2B2B2B" BorderBrush="#33FFFFFF" BorderThickness="1" CornerRadius="10" MinHeight="70">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Цвет иконки теперь привязан к цвету акцента -->
            <Path x:Name="IconSuccess" Data="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=UserControl}}" Width="20" Height="20" Margin="15,0,0,0" VerticalAlignment="Center"/>
            <Path x:Name="IconError" Data="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z" Fill="#F44336" Width="15" Height="15" Margin="18,0,0,0" VerticalAlignment="Center" Visibility="Collapsed"/>

            <TextBlock x:Name="MessageText" Grid.Column="1" Text="Сообщение" Foreground="White" TextWrapping="Wrap" Margin="15,10" VerticalAlignment="Center"/>

            <!-- Упрощена иконка и добавлено растягивание -->
            <Button Grid.Column="2" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="5" Width="24" Height="24" Click="CloseButton_Click" Background="Transparent" BorderThickness="0" Cursor="Hand">
                <Path Data="M0,0 L1,1 M0,1 L1,0" Stroke="#8A9BAB" StrokeThickness="1.5" Stretch="Uniform" Width="10" Height="10"/>
            </Button>

            <!-- Цвет прогресс-бара теперь привязан к цвету акцента -->
            <ProgressBar Grid.Row="1" Grid.ColumnSpan="3" Height="4" x:Name="LifeProgressBar" 
                         Background="#33FFFFFF" 
                         BorderThickness="0" 
                         Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                         Margin="10,0,10,10"
                         Style="{StaticResource LifeProgressBarStyle}"/>
        </Grid>
    </Border>
</UserControl>

